angular.module("ng.httpLoader",["ng.httpLoader.httpMethodInterceptor"]).directive("ngHttpLoader",["$rootScope","$parse","$timeout",function(t,e,r){return{scope:{methods:"@",template:"@",title:"@",ttl:"@"},template:'<div class="http-loader__wrapper" ng-include="template" ng-show="showLoader"></div>',link:function(n){var o=e(n.methods)()||n.methods;o=angular.isUndefined(o)?[]:o,o=angular.isArray(o)?o:[o],angular.forEach(o,function(t,e){o[e]=t.toUpperCase()});var i=e(n.ttl)()||n.ttl;i=angular.isUndefined(i)?0:i,i=1e3*Number(i),i=angular.isNumber(i)?i:0,Array.prototype.indexOf||(o.indexOf=function(t){for(var e=this.length;e--;)if(this[e]===t)return e;return-1}),n.showLoader=!1;var a,d=n.showLoader,u=function(t,e){if(-1!==o.indexOf(e.toUpperCase())?d="loaderShow"===t.name:0===o.length&&(d="loaderShow"===t.name),i<=0||!a&&!d)return void(n.showLoader=d);a||(n.showLoader=d,a=r(function(){d||(n.showLoader=d),a=void 0},i))};t.$on("loaderShow",u),t.$on("loaderHide",u)}}}]),angular.module("ng.httpLoader.httpMethodInterceptor",[]).provider("httpMethodInterceptor",function(){var t=[],e=!1;this.whitelistDomain=function(e){t.push(e)},this.whitelistLocalRequests=function(){e=!0},this.$get=["$q","$rootScope",function(r,n){var o=0,i=function(r){if("//"!==r.substring(0,2)&&-1===r.indexOf("://")&&e)return!0;for(var n=t.length;n--;)if(-1!==r.indexOf(t[n]))return!0;return!1},a=function(t){i(t.url)&&0==--o&&n.$emit("loaderHide",t.method)};return{request:function(t){return i(t.url)&&(o++,n.$emit("loaderShow",t.method)),t||r.when(t)},response:function(t){return a(t.config),t||r.when(t)},responseError:function(t){return a(t.config),r.reject(t)}}}]}).config(["$httpProvider",function(t){t.interceptors.unshift("httpMethodInterceptor")}]);